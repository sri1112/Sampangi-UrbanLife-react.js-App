"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[68357],{900095:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var i=n(667294),a=n(545007),r=n(883119),o=n(868977),s=n(265332),m=n(228028),_=n(19963),l=n(18644),c=n(231333),d=n(233846),u=n(693806),g=n(339908),p=n(882368),A=n(644849),f=n(93002),h=n(617100),y=n(785893);function C({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:n,disablePhotoCommentSelection:C,isEligibleForPinReactions:S,isPDP:E,orbacSubjectId:x,pinId:D,privatePin:L,reactionByMe:N,reactionCounts:Z,setIsLoadingNewlyCreatedComment:O,showCommentComposer:P,showReactBackground:j,storyPinDataId:I,viewParameter:b}){let v,w=(0,d.ZP)(),B=(0,p.Z)(),T=(0,a.I0)(),{logContextEvent:k}=(0,_.v)(),M=(0,o.Z)(),{showOneToast:U}=(0,g.F9)(),{closeupWithinMasonryEnabled:z,peekCloseupEnabled:H,clientTrackingParams:K}=(0,f.x4)(),[R,W]=(0,i.useState)(!1),[F,J]=(0,i.useState)(s.A9.NONE);v=E?z?2:8:+!!z;let G=8*!!E;async function q(n){let{commentMedia:i,contentMarkdown:a,force:r,imageSignatures:o,tags:m}=n;if(null===e)return!1;O(!0);try{if(e){if(o.length){let t={aggregatedPinDataId:e,details:a,image_signatures:o,pin_id:D??"",username:B.isAuth?B.username:"",fromUnifiedComment:!0};await T((0,h.DD)(t))}else await M({commentMedia:i,force:r,fromUnifiedComment:!0,objectType:A.o.pin,objectId:e,pinId:D,tags:m,text:a,orbacSubjectId:x});k({event_type:7,clientTrackingParams:K,object_id_str:D,aux_data:{num_user_mention_tags:(m?JSON.parse(m):[]).length,...I?{creator_id:t,story_pin_data_id:I}:{}}})}}catch(e){return[u.ky,u.LJ].includes((0,l.Z)(e,"api_error_code")??0)?J((0,l.Z)(e,"api_error_code")===u.ky?s.A9.WARNING:s.A9.BLOCK):U(({hideToast:t})=>(0,y.jsx)(c.Z,{onHide:t,text:(0,l.Z)(e,"message_detail")||(0,l.Z)(e,"message")||w._('There was an issue posting your comment.', 'comment.post.errorMessage', 'error message for posting comment in toast'),type:"error"})),O(!1),!1}return W(!1),O(!1),!0}let{marginEnd:Q,marginStart:V}=H?{marginEnd:4,marginStart:4}:z?{marginEnd:0,marginStart:0}:{marginEnd:v,marginStart:G};return(0,y.jsx)(r.xu,{marginEnd:Q,marginStart:V,children:(0,y.jsx)(m.Z,{clientTrackingParams:K,commentCount:n,commentWarningModalState:F,disablePhotoCommentSelection:C,dismissCommentWarningModal:()=>J(s.A9.NONE),iconSize:E?20:void 0,isEligibleForPinReactions:S,isLeftAligned:E,objectType:A.o.pin,onAddItem:q,onCancelItem:()=>W(!1),onEnter:()=>W(!0),pinId:D,privatePin:L,reactionByMe:N,reactionCounts:Z,showCommentComposer:P,showReactBackground:!E&&j,statusType:R?"textInflightCreation":"textStaticDisplay",viewParameter:b})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer-36cca9b2caa9c26c.mjs.map